<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>index</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no"/>

    <link rel="stylesheet" href="../../css/public.css">
    <link rel="stylesheet" href="../../css/mall.css">

    <script type="text/javascript" src="../../js/fastclick.js"></script>
    <script type="text/javascript" src="../../js/public.js"></script>

    <title>商品列表</title>
</head>

<body>
<header class="public-header border-b">
    <div class="header-box">
        <a href="#" class="back-box"><i class="icon-back"></i></a>
        <a href="#" class="search">卫生纸</a>
    </div>
</header>

<section>
    <div class="screen-box">
        <div class="screen">
            <a class="screen-item" data-type="1" href="javascript: void(0);">销量</a>
            <a class="screen-item price-sort" data-type="2" href="javascript: void(0);">价格</a>
            <a class="screen-item" id="screen" ref="off" data-type="3" href="javascript: void(0);">筛选</a>
        </div>
    </div>

    <div class="goods-list">
        <a href="#" class="goods-item">
            <div class="goods-img">
                <img src="../../images/img/goods-img.png" alt="早秋复古宽松直筒竖条纹长袖雪纺衬衣">
            </div>
            <div class="goods-info">
                <h4 class="goods-name">早秋复古宽松直筒竖条纹长袖雪</h4>
                <p class="goods-tip">柔软面料／穿着舒适</p>
                <div class="goods-price-group">
                    <p class="goods-price-rmb">
                        ￥<span>128.00</span>
                    </p>
                    <p class="goods-price-tb">
                        <i class="icon-tb"></i>
                        <span>55.00</span>
                    </p>
                </div>
            </div>
        </a>

        <a href="#" class="goods-item">
            <div class="goods-img">
                <img src="../../images/img/goods-img.png" alt="早秋复古宽松直筒竖条纹长袖雪纺衬衣">
            </div>
            <div class="goods-info">
                <h4 class="goods-name">早秋复古宽松直筒竖条纹长袖雪纺衬衣</h4>
                <p class="goods-tip">柔软面料／穿着舒适</p>
                <div class="goods-price-group">
                    <p class="goods-price-rmb">
                        ￥<span>128.00</span>
                    </p>
                    <p class="goods-price-tb">
                        <i class="icon-tb"></i>
                        <span>55.00</span>
                    </p>
                </div>
            </div>
        </a>
    </div>
</section>
<script src="../../js/jquery-3.2.1.min.js"></script>
<script>
    (function () {
        $(".screen-item").on("click", function () {
            var dataType = $(this).data("type");
            $(this).addClass('active').siblings('a').removeClass('active');
            if ($(this).attr("id") !== "screen") {
                $(".filtrate").remove();
                $(".mask").remove();
            }
        });
        $(".price-sort").on("click", function () {
            var sort = $(".price-sort i"),
                ifClass = sort.attr("class");
            if (ifClass === "" || ifClass === undefined) {
                sort.addClass("asc");
            } else if (ifClass === "asc") {
                sort.addClass("desc").removeClass("asc");
            } else if (ifClass === "desc") {
                sort.addClass("asc").removeClass("desc");
            }
        });


        $("#screen").on("click", function () {
            // $(".mask").toggle();

            var isShow = false;
            var mask = document.createElement("div");
            var filtrate = document.createElement("div");
            filtrate.setAttribute("class", "filtrate");
            mask.setAttribute("class", "mask");
            var on_off = $(this).attr("ref");

            if (on_off === "off") {
                $("section").append(mask);
                $(".mask").append(filtrate);
                var filtrateHtml = `<div class="fil-item fil-rmb" data-price="rmb">
                                            <div class="fil-type">价格区间</div>
                                            <input class="mprice" type="text" name="" placeholder="最低价">
                                            <em>—</em>
                                            <input class="bprice" type="text" name="" placeholder="最高价">
                                        </div>
                                        <div class="fil-item fil-tb" data-price="tb">
                                            <div class="fil-type">T币区间</div>
                                            <input class="mprice" type="text" name="" placeholder="最低价">
                                            <em>—</em>
                                            <input class="bprice" type="text" name="" placeholder="最高价">
                                        </div>
                                        <div class="btn-group">
                                            <a class="reset" href="#">清空</a>
                                            <a class="confirm" href="#">确定</a>
                                        </div>`;
                $(".filtrate").html(filtrateHtml);
                $(this).attr("ref", "on");

            } else {
                $(".mask").remove();
                $(this).attr("ref", "off");
            }


        })

        $(".reset").on("click", function () {
            $(this).parents(".filtrate").find("input").val("");
        })

        $(".confirm").on("click", function () {
            var rmb_mprice = $(this).parents(".filtrate").find(".fil-rmb").children(".mprice").val(); //rmb 最低价
            var rmb_bprice = $(this).parents(".filtrate").find(".fil-rmb").children(".bprice").val(); //rmb 最高价
            var tb_mprice = $(this).parents(".filtrate").find(".fil-tb").children(".mprice").val(); //tb 最低价
            var tb_bprice = $(this).parents(".filtrate").find(".fil-tb").children(".bprice").val(); //tb 最高价

            //TODO 根据数据写判断

            alert("ajax" + rmb_mprice, rmb_bprice, tb_mprice, tb_bprice);
            $(".mask").remove();
        })
    })()
</script>
</body>

</html>