<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>幸运大转盘</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no"/>
    <link rel="stylesheet" href="../../css/public.css">
    <link rel="stylesheet" href="../../css/turntable.css">
    <script type="text/javascript" src="../../js/fastclick.js"></script>
    <script type="text/javascript" src="../../js/public.js"></script>
</head>
<body>
<header class="public-header header-nmb">
    <div class="header-box">
        <a href="#" class="back-box"><i class="icon-back"></i></a>
        <h4 class="title">幸运大转盘</h4>
    </div>
</header>
<div class="turntable_container">
    <div class="winning" id="winning">点击查看中奖记录</div>
    <div class="rotate_container">
        <div class="pointer"></div>
        <div class="rotate" id="rotate"></div>
    </div>
</div>

<div class="zp_mask" id="zp_mask"></div>
<div class="zp_winning" id="zp_winning">
    <div class="zp_table_box">
        <table class="zp_table">
            <thead>
            <tr>
                <th>中奖名称</th>
                <th>中奖时间</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            <tr>
                <td>美的电饭煲</td>
                <td>2018.01.15</td>
                <td><a href="#">点击领奖</a></td>
            </tr>
            </tbody>
        </table>
    </div>

</div>

</body>
<script src="../../js/jquery-3.2.1.min.js"></script>
<script src="../../js/addons/awardRotate.js"></script>
<script type="text/javascript">
    $(function () {

        var rotateTimeOut = function () {
            $('#rotate').rotate({
                angle: 0,
                animateTo: 2160,
                duration: 8000,
                callback: function () {
                    alert('网络超时，请检查您的网络设置！');
                }
            });
        };
        var bRotate = false;

        var rotateFn = function (awards, angles, txt) {
            bRotate = !bRotate;
            $('#rotate').stopRotate();
            $('#rotate').rotate({
                angle: 0,
                animateTo: angles + 1800,
                duration: 8000,
                callback: function () {
                    console.log(txt);
                    bRotate = !bRotate;
                }
            })
        };

        $('.pointer').on("click", function () {

            if (bRotate) return;
            var item = rnd(0, 11);
            //var item = 2;
            switch (item) {
                case 0:
                    //var angle = [26, 88, 137, 185, 235, 287, 337];
                    rotateFn(0, 224, '谢谢参与');
                    break;
                case 1:
                    //var angle = [88, 137, 185, 235, 287];
                    rotateFn(1, 17, '格兰仕微波炉');
                    break;
                case 2:
                    //var angle = [137, 185, 235, 287];
                    rotateFn(2, 47, '5团票');
                    break;
                case 3:
                    //var angle = [137, 185, 235, 287];
                    rotateFn(3, 74, '充电宝');
                    break;
                case 4:
                    //var angle = [185, 235, 287];
                    rotateFn(4, 104, '0.5团票');
                    break;
                case 5:
                    //var angle = [185, 235, 287];
                    rotateFn(5, 134, '美的电饭锅');
                    break;
                case 6:
                    //var angle = [235, 287];
                    rotateFn(6, 164, '再来一次');
                    break;
                case 7:
                    //var angle = [287];
                    rotateFn(7, 194, '平底锅');
                    break;
                case 8:
                    //var angle = [287];
                    rotateFn(8, 254, '抱枕');
                    break;
                case 9:
                    //var angle = [287];
                    rotateFn(9, 284, '10团票');
                    break;
                case 10:
                    //var angle = [287];
                    rotateFn(10, 314, 'iPhone X');
                    break;
                case 11:
                    //var angle = [287];
                    rotateFn(11, 344, '1团票');
                    break;
            }

            console.log(item);
        });
    });

    function rnd(n, m) {
        return Math.floor(Math.random() * (m - n + 1) + n)
    }
</script>

<script>
    $("#winning").on("click", function () {

        $(".zp_mask").css({display: "block"});
        $(".zp_winning").css({display: "block"});

    });


    $("#zp_mask").on("click", function () {
        $("#zp_winning").css({display: "none"});
        $(this).css({display: "none"});
    })
</script>

</html>